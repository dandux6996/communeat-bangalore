<!perp>
<!DOCTYPE html>
<html>
<head>
  <title>Bangalore Restaurant Finder</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 40px;}
    #results {margin-top: 20px;}
    .restaurant {margin-bottom: 15px;}
  </style>
</head>
<body>
  <h2>Bangalore Restaurant Finder</h2>
  <label for="locationInput">Enter Pincode or Locality:</label>
  <input type="text" id="locationInput" placeholder="Eg: 560001 or Indiranagar"/>
  <button onclick="findRestaurants()">Search</button>
  <div id="results"></div>

  <script>
    const apiKey = 'YOUR_GOOGLE_MAPS_API_KEY';

    function findRestaurants() {
      const location = document.getElementById('locationInput').value.trim();
      if (!location) {
        alert("Please enter a pincode or locality.");
        return;
      }
      document.getElementById('results').innerText = 'Searching...';

      // Step 1: Geocode to get lat/lng
      fetch(`https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(location)},Bangalore&key=${apiKey}`)
        .then(response => response.json())
        .then(data => {
          if (data.status !== 'OK' || !data.results.length) {
            document.getElementById('results').innerText = "Location not found. Try a valid pincode/locality.";
            return;
          }
          const loc = data.results[0].geometry.location;
          // Step 2: Nearby Search for restaurants
          return fetch(`https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=${loc.lat},${loc.lng}&radius=2000&type=restaurant&key=${AIzaSyDqKeq3a0O__Mm7EQLy0zrHYuJUq8Ly1Ps}`);
        })
        .then(response => response ? response.json() : null)
        .then(data => {
          if (!data || data.status !== 'OK' || !data.results.length) {
            document.getElementById('results').innerText = "No restaurants found in this area.";
            return;
          }
          // Step 3: Pick 5 random restaurants
          const restaurants = data.results;
          const picked = [];
          let used = {};
          while (picked.length < 5 && picked.length < restaurants.length) {
            let i = Math.floor(Math.random() * restaurants.length);
            if (!used[i]) {
              picked.push(restaurants[i]);
              used[i] = true;
            }
          }
          let html = `<h3>5 Restaurants in ${document.getElementById('locationInput').value}:</h3>`;
          picked.forEach((rest, idx) => {
            html += `<div class="restaurant">
              <b>${idx+1}. ${rest.name}</b><br>
              ${rest.vicinity || rest.formatted_address || "Address not available"}
            </div>`;
          });
          document.getElementById('results').innerHTML = html;
        })
        .catch(error => {
          document.getElementById('results').innerText = "Error fetching data. Please try again.";
        });
    }
  </script>
</body>
</html>
